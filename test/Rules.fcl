FUNCTION_BLOCK Rules

VAR_INPUT
  Obstacles : REAL;
  Distance : REAL;
END_VAR

VAR_OUTPUT
  Direction : REAL;
END_VAR

FUZZIFY Obstacles
  TERM Small := (0, 1) (0.5, 0);
  TERM Medium := (0, 0) (0.5, 1) (1, 0);
  TERM Big := (0.5, 0) (1, 1);
END_FUZZIFY

FUZZIFY Distance
  TERM Near := (0, 1) (30, 0);
  TERM Medium := (20, 0) (50, 1) (80, 0);
  TERM Far := (70, 0) (100, 1);
END_FUZZIFY

DEFUZZIFY Direction
  TERM Low := (0, 1) (50, 0);
  TERM Medium := (20, 0) (50, 1) (80, 0);
  TERM High := (50, 0) (100, 1);
  METHOD : COG;
END_DEFUZZIFY

RULEBLOCK MyRules
  RULE 1: IF Obstacles IS Small AND Distance IS Far THEN Direction IS Medium;
  RULE 2: IF Obstacles IS Small AND Distance IS Medium THEN Direction IS Medium;
  RULE 3: IF Obstacles IS Small AND Distance IS Near THEN Direction IS Low;
  RULE 3: IF Obstacles IS Medium AND Distance IS Far THEN Direction IS High;
  RULE 4: IF Obstacles IS Medium AND Distance IS Medium THEN Direction IS Medium;
  RULE 5: IF Obstacles IS Medium AND Distance IS Near THEN Direction IS Low;
  RULE 6: IF Obstacles IS Big AND Distance IS Near Then Direction IS Medium;
  RULE 8: IF Obstacles IS Big AND Distance IS Medium THEN Direction IS High;
  RULE 9: IF Obstacles IS Big AND Distance IS Far THEN Direction IS High;
END_RULEBLOCK
END_FUNCTION_BLOCK

